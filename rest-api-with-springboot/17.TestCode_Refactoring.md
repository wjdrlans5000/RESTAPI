# 테스트 코드 리팩토링
- 여러 컨트롤러 간의 중복코드 제거하기
  - 상속을 사용하기
  - @Ignore
    - 테스트 클래스의 중복을 제거하지만 이는 중복을 제거하기 위한 상위 클래스이지 테스트 클래스가 아니다.
    - 때문에 BaseControllerTest 클래스는 테스트가 실행되어서는 안된다.
    - 이를 알리기위해 Junit 에서 제공하는 @Ignore 를 사용한다.
    - @Ignore를 사용하면 테스트 대상 에서 제외 된다.
- Mo-ckMvc,ObjectMapper,ModelMapper 등 중복 객체를 상속을 통해 해결
```java
/*
 * @WebMvcTest
 * MockMvc 빈을 자동 설정 해준다. 따라서 그냥 가져와서 쓰면 됨.
 * 웹 관련 빈만 등록해 준다. (슬라이스)
 * 리파지토리 빈으로 등록해주지 않음.
 * */
@RunWith(SpringRunner.class)
//@WebMvcTest
@SpringBootTest
@AutoConfigureMockMvc // 모킹을 사용하지않고 실제 리파지토리를 사용하여 테스트 동작
@AutoConfigureRestDocs
@Import(RestDocsConfiguration.class) //다른 스프링 bean 설정파일을 읽어와서 사용하는 방법 중 하나
@ActiveProfiles("test") //test application properties를 추가로 사용
@Ignore
public class BaseControllerTest {
    /*
     * MockMvc는 요청을만들고 응답을 검증할수있는 스프링MVC 테스트에 있어서 핵심적인 클래스 중 하나.
     * 웹 서버를 띄우지 않고도 스프링 MVC (DispatcherServlet)가 요청을 처리하는 과정을 확인할 수 있기 때문에 컨트롤러 테스트용으로 자주 쓰임.
     * 디스패처서블릿을 만들어야하기때문에 단위테스트보다는 느림.
     * */

    @Autowired
    protected MockMvc mockMvc;

    @Autowired
    protected ObjectMapper objectMapper;

    @Autowired
    protected ModelMapper modelMapper;

}

```
```java
public class EventControllerTests extends BaseControllerTest {

    /*
    * MockMvc는 요청을만들고 응답을 검증할수있는 스프링MVC 테스트에 있어서 핵심적인 클래스 중 하나.
    * 웹 서버를 띄우지 않고도 스프링 MVC (DispatcherServlet)가 요청을 처리하는 과정을 확인할 수 있기 때문에 컨트롤러 테스트용으로 자주 쓰임.
    * 디스패처서블릿을 만들어야하기때문에 단위테스트보다는 느림.
    * */

    @Autowired
    EventRepository eventRepository;


    @Test
    @TestDescription("정상적으로 이벤트를 생성하는 테스트")
    public void createEvent() throws Exception {
    }
}
    
```
```java
public class IndexControllerTest extends BaseControllerTest {

    @Test
    public void index() throws Exception {
        this.mockMvc.perform(get("/api/"))
                .andDo(print())
                .andExpect(status().isOk())
                .andExpect(jsonPath("_links.events").exists())

        ;
    }
}
```